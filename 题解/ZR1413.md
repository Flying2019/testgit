计算SG和surreal number，最后结果是相加。
```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
#include<vector>
#define N 100010
#define ll long long
using namespace std;
vector<int>s[N];
ll f0[N],f1[N];
int calcsg(int w,int h)
{
	if(w%2==1 && h%2==1) return s[w].size()^s[h].size();
	while(w%2==0) w/=2;
	while(h%2==0) h/=2;
	return (s[w].size()^s[h].size())+1;
}
ll calcsur(int w,int h)
{
	if(s[w].size()==s[h].size()) return 0;
	int f=1;
	if(s[w].size()<s[h].size()) swap(w,h),f=-1;
	ll ans=0;
	for(int i=s[h].size();i<s[w].size();i++) ans=ans*s[w][i]+1;
	return f*ans;
}
bool p[N];
int main()
{
	int n;
	scanf("%d",&n);
	for(int i=2;i<N;i++)
	if(!p[i])
	{
		for(ll k=i;k<N;k*=i)
			for(int j=1;j*k<N;j++)
			{
				s[j*k].push_back(i);
				p[j*k]=1;
			}
	}
	for(int i=1;i<=n;i++)
	{
		int a,b,w,h;
		scanf("%d%d%d%d",&a,&b,&w,&h);
		if(a && b) f0[i]=f0[i-1]^calcsg(w,h),f1[i]=f1[i-1];
		if(!a && !b) f0[i]=f0[i-1],f1[i]=f1[i-1]+calcsur(w,h);
		if(a && !b) f0[i]=f0[i-1]^calcsg(1,h),f1[i]=f1[i-1]+h*calcsur(w,1);
		if(!a && b) f0[i]=f0[i-1]^calcsg(w,1),f1[i]=f1[i-1]+w*calcsur(1,h);
	}
	int m;
	scanf("%d",&m);
	while(m --> 0)
	{
		int l,r;
		scanf("%d%d",&l,&r);
		puts(f1[r]>f1[l-1] || (f1[r]==f1[l-1] && f0[r]!=f0[l-1])?"Yes":"No");
	}
}
```
反思：有位运算时一定要加括号
