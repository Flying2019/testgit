考虑题目本质就是求一张无向图最小染色数（虽然可能边会有点多），但只要考虑一个节点会不会和兄弟、父亲、祖父冲突即可。

直接贪心染色，每次取最小的还能取得颜色染色即可。
```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
#define N 200010
using namespace std;
int nxt[N<<1],to[N<<1],head[N],cnt;
void add(int u,int v)
{
	nxt[++cnt]=head[u];
	to[cnt]=v;
	head[u]=cnt;
}
int col[N],ans=1;
void dfs(int u,int pre)
{
	int c=1;
	for(int i=head[u];i;i=nxt[i])
	{
		int v=to[i];
		if(v==pre) continue;
		while(c==col[u] || c==col[pre]) ++c;
		ans=max(ans,c);
		col[v]=c;
		++c;
		dfs(v,u);
	}
}
int main()
{
	int n;
	scanf("%d",&n);
	for(int i=1;i<n;i++)
	{
		int u,v;
		scanf("%d%d",&u,&v);
		add(u,v);
		add(v,u);
	}
	col[1]=1;
	dfs(1,0);
	printf("%d\n",ans);
    for(int i=1;i<=n;i++) printf("%d ",col[i]);
	return 0;
}
```
